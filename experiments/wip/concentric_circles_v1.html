<!DOCTYPE html> 
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title> Document </title>

</head>
<body>
	<script src="../../sources/p5.min.js"></script>
	<script>

		json_obj = [{"season":2005,"name":"ARLENE","iso_time":"2005-06-09 06:00:00 UTC","nature":"TS","usa_latitude":18.2,"usa_longitude":-83.9,"usa_wind":35,"usa_status":"TS","usa_pressure":1003,"day_counts":8.0,"sid":"2005160N17276"},{"season":2005,"name":"BRET","iso_time":"2005-06-28 22:35:00 UTC","nature":"TS","usa_latitude":19.9,"usa_longitude":-95.7,"usa_wind":35,"usa_status":"TS","usa_pressure":1002,"day_counts":2.0,"sid":"2005180N20265"},{"season":2005,"name":"CINDY","iso_time":"2005-07-05 06:00:00 UTC","nature":"TS","usa_latitude":25.1,"usa_longitude":-90.2,"usa_wind":35,"usa_status":"TS","usa_pressure":1009,"day_counts":4.0,"sid":"2005185N18273"},{"season":2005,"name":"DENNIS","iso_time":"2005-07-05 12:00:00 UTC","nature":"TS","usa_latitude":13.0,"usa_longitude":-65.9,"usa_wind":35,"usa_status":"TS","usa_pressure":1007,"day_counts":16.0,"sid":"2005186N12299"},{"season":2005,"name":"EMILY","iso_time":"2005-07-12 00:00:00 UTC","nature":"TS","usa_latitude":11.0,"usa_longitude":-46.8,"usa_wind":35,"usa_status":"TS","usa_pressure":1006,"day_counts":25.0,"sid":"2005192N11318"},{"season":2005,"name":"FRANKLIN","iso_time":"2005-07-22 00:00:00 UTC","nature":"TS","usa_latitude":25.7,"usa_longitude":-75.9,"usa_wind":40,"usa_status":"TS","usa_pressure":1009,"day_counts":21.0,"sid":"2005203N25285"},{"season":2005,"name":"GERT","iso_time":"2005-07-24 06:00:00 UTC","nature":"TS","usa_latitude":20.8,"usa_longitude":-95.0,"usa_wind":35,"usa_status":"TS","usa_pressure":1009,"day_counts":3.0,"sid":"2005205N19267"},{"season":2005,"name":"HARVEY","iso_time":"2005-08-03 06:00:00 UTC","nature":"TS","usa_latitude":29.5,"usa_longitude":-68.6,"usa_wind":40,"usa_status":"TS","usa_pressure":1003,"day_counts":15.0,"sid":"2005215N28291"},{"season":2005,"name":"IRENE","iso_time":"2005-08-07 12:00:00 UTC","nature":"TS","usa_latitude":20.2,"usa_longitude":-45.0,"usa_wind":35,"usa_status":"TS","usa_pressure":1005,"day_counts":23.0,"sid":"2005217N13327"},{"season":2005,"name":"JOSE","iso_time":"2005-08-22 18:00:00 UTC","nature":"TS","usa_latitude":19.6,"usa_longitude":-95.0,"usa_wind":35,"usa_status":"TS","usa_pressure":1004,"day_counts":2.0,"sid":"2005235N19266"},{"season":2005,"name":"KATRINA","iso_time":"2005-08-24 12:00:00 UTC","nature":"TS","usa_latitude":24.5,"usa_longitude":-76.5,"usa_wind":35,"usa_status":"TS","usa_pressure":1006,"day_counts":17.0,"sid":"2005236N23285"},{"season":2005,"name":"LEE","iso_time":"2005-08-31 12:00:00 UTC","nature":"TS","usa_latitude":29.0,"usa_longitude":-50.4,"usa_wind":35,"usa_status":"TS","usa_pressure":1006,"day_counts":1.0,"sid":"2005241N14315"},{"season":2005,"name":"MARIA","iso_time":"2005-09-02 12:00:00 UTC","nature":"TS","usa_latitude":21.1,"usa_longitude":-49.4,"usa_wind":35,"usa_status":"TS","usa_pressure":1006,"day_counts":21.0,"sid":"2005245N19315"},{"season":2005,"name":"OPHELIA","iso_time":"2005-09-07 06:00:00 UTC","nature":"TS","usa_latitude":27.9,"usa_longitude":-78.8,"usa_wind":35,"usa_status":"TS","usa_pressure":1003,"day_counts":29.0,"sid":"2005249N26281"},{"season":2005,"name":"NATE","iso_time":"2005-09-06 00:00:00 UTC","nature":"TS","usa_latitude":28.4,"usa_longitude":-66.6,"usa_wind":35,"usa_status":"TS","usa_pressure":1005,"day_counts":13.0,"sid":"2005249N28293"},{"season":2005,"name":"PHILIPPE","iso_time":"2005-09-17 18:00:00 UTC","nature":"TS","usa_latitude":13.5,"usa_longitude":-54.9,"usa_wind":35,"usa_status":"TS","usa_pressure":1007,"day_counts":15.0,"sid":"2005261N13306"},{"season":2005,"name":"RITA","iso_time":"2005-09-18 18:00:00 UTC","nature":"TS","usa_latitude":22.2,"usa_longitude":-72.3,"usa_wind":35,"usa_status":"TS","usa_pressure":1005,"day_counts":18.0,"sid":"2005261N21290"},{"season":2005,"name":"STAN","iso_time":"2005-10-02 06:00:00 UTC","nature":"TS","usa_latitude":19.5,"usa_longitude":-87.2,"usa_wind":40,"usa_status":"TS","usa_pressure":1003,"day_counts":7.0,"sid":"2005275N19274"},{"season":2005,"name":"TAMMY","iso_time":"2005-10-05 06:00:00 UTC","nature":"TS","usa_latitude":27.3,"usa_longitude":-79.7,"usa_wind":35,"usa_status":"TS","usa_pressure":1006,"day_counts":4.0,"sid":"2005278N27280"},{"season":2005,"name":"VINCE","iso_time":"2005-10-09 12:00:00 UTC","nature":"TS","usa_latitude":33.8,"usa_longitude":-19.3,"usa_wind":55,"usa_status":"TS","usa_pressure":995,"day_counts":4.0,"sid":"2005281N33339"},{"season":2005,"name":"WILMA","iso_time":"2005-10-17 06:00:00 UTC","nature":"TS","usa_latitude":16.9,"usa_longitude":-79.6,"usa_wind":35,"usa_status":"TS","usa_pressure":1000,"day_counts":24.0,"sid":"2005289N18282"},{"season":2005,"name":"ALPHA","iso_time":"2005-10-22 18:00:00 UTC","nature":"TS","usa_latitude":16.5,"usa_longitude":-68.5,"usa_wind":35,"usa_status":"TS","usa_pressure":1005,"day_counts":3.0,"sid":"2005296N16293"},{"season":2005,"name":"BETA","iso_time":"2005-10-27 06:00:00 UTC","nature":"TS","usa_latitude":11.0,"usa_longitude":-81.3,"usa_wind":35,"usa_status":"TS","usa_pressure":1005,"day_counts":10.0,"sid":"2005300N10279"},{"season":2005,"name":"GAMMA","iso_time":"2005-11-15 06:00:00 UTC","nature":"TS","usa_latitude":14.3,"usa_longitude":-66.0,"usa_wind":35,"usa_status":"TS","usa_pressure":1004,"day_counts":6.0,"sid":"2005318N13298"},{"season":2005,"name":"DELTA","iso_time":"2005-11-23 12:00:00 UTC","nature":"TS","usa_latitude":27.4,"usa_longitude":-41.2,"usa_wind":50,"usa_status":"TS","usa_pressure":983,"day_counts":13.0,"sid":"2005324N27312"},{"season":2005,"name":"EPSILON","iso_time":"2005-11-29 06:00:00 UTC","nature":"TS","usa_latitude":31.5,"usa_longitude":-49.2,"usa_wind":45,"usa_status":"TS","usa_pressure":993,"day_counts":25.0,"sid":"2005333N32311"},{"season":2005,"name":"ZETA","iso_time":"2005-12-30 06:00:00 UTC","nature":"TS","usa_latitude":24.2,"usa_longitude":-36.1,"usa_wind":40,"usa_status":"TS","usa_pressure":1005,"day_counts":19.0,"sid":"2005364N24324"}]

		Math.radians = function(degrees) {
		  return degrees * Math.PI / 180;
		}

		max_circles = json_obj.length
		console.log(max_circles)
		max_size = 100

		function get_point_on_circle(angle_in_degrees){
		  angle = Math.radians(angle_in_degrees + 270)
		  x0 = 400
		  y0 = 400
		  r = 300 //
		  //r = random(150,300)
		  return[x0 + r*cos(angle), y0 + r*sin(angle)]
		}



		function setup() {
		  //createCanvas(windowWidth, windowHeight);
		  createCanvas(800, 800);
		  
		  ellipse(400, 400, 5 )
		  
		  fill('rgba(0,0,0, 0.0)');

		  for(let i = 0; i < max_circles; i++){
		    
		    data = json_obj[i]
		    
		    //date-stuff
		    date_value_ms = Date.parse(data.iso_time)
		    //covert date to [day-of-year]
		    const dayOfYear = date => Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
		    day_of_year = dayOfYear(new Date(date_value_ms)); 
		    console.log(day_of_year)
		    point_on_circle = get_point_on_circle(day_of_year)
		    console.log(point_on_circle[0])
		    console.log(point_on_circle[1])
		    
		    //get X/Y coords of circle at [day-of-year] angle
		    //maybe just put in a box with one box per day
		    //19*19 = 361
		    
		    w = data["usa_wind"] //10 //random(max_size)
		    n = data["day_counts"]/2
		    //x = max(random(w, 800 - w), w)
		    //y = max(random(w, 800 - w), w)
		    //x = data["usa_latitude"]*random(5,20)*2
		    //y = (data["usa_longitude"]*-1)*10
		    x = point_on_circle[0]
		    y = point_on_circle[1]
		    
		    new_circle = new Concentric(x, y, w, n, data)
		    new_circle.display()
		    
		  }
		}

		function draw() {
		  //background(220);
		}

		function Concentric(x, y, w, n, data) {
		  this.data = data
		  this.x = x
		  this.y = y
		  this.width = w
		  this.num_circles = n

		  this.display = function() {
		    elipse_stack_param = random(5,10)
		    for(let j = 0; j < this.num_circles; j++){
		      stroke(51)
		      let c = color(50, 55, 100);
		      stroke(c)
		      ellipse(this.x, this.y, this.width + j*elipse_stack_param );
		    }
		    //pop();
		  }
		}

	</script>
</body>
</html>